Быстрая сортировка или сортировка Хоара (по имени разработчика алгоритма) - широко известный алгоритм сортировки, разработанный английским программистом Чарльзом Хоаром в 1960 году. Не удивляйтесь - большинство алгоритмов сортировки были разработаны очень давно, примерно в 60-ых годах 20-го века, но они не потеряли свою актуальность до сих пор - пока никто ничего лучше не придумал.

Часто быструю сортировку называют `qsort` по имени в стандартной библиотеки языка Си. Да, есть функция `qsort()`, можно использовать ее, но нам это не интересно. Гораздо интереснее написать собственную реализацию.

Быстрая сортировка - это улучшенный вариант пузырьковой сортировки, но эффективность этого алгоритма значительно выше. Принципиальное отличие заключается в том, что первым делом производятся перестановки на наибольшем возможном расстоянии и после каждого прохода элементы делятся на две независимые группы. Интересно, что незначительное улучшение самого неэффективного алгоритма породило одно из самых эффективных алгоритмов сортировки. Он эффективен до такой степени, что его включили в стандартную библиотеку функций C.

Алгоритм заключается в следующем. Мы выбираем некоторый элемент - опорный элемент. Обычно это медиана - то есть элемент в середине массива.

Далее выполняется операция разделения: реорганизуем массив таким образом, чтобы все элементы со значением меньшим или равным опорному элементу, оказались слева от него, а все элементы, превышающие по значению опорный - справа от него.

Рекурсивно нужно упорядочить подмассивы, лежащие слева и справа от опорного элемента. Условие выхода из рекурсии - массив, состоящий из одного элемента (или пустой массив). Учитывая, что при каждой итерации длина обрабатываемого отрезка массива уменьшается как минимум на единицу, условие выхода из рекурсии обязательно будет достигнуто и обработка массива гарантированно будет прекращена.

```cpp
#include <iostream>
#include <cstdlib>

using namespace std;

#define MAXARRAY 10

// Сортируем все между `low` <-> `high`
void quicksort(int arr[], int low, int high) {
    int i = low;
    int j = high;
    int y = 0;
    // Опроный элемент
    int z = arr[(low + high) / 2];
    // Разделение
    do {
        // Находим элемент левее
        while(arr[i] < z) i++;
        // Находим элемент правее
        while(arr[j] > z) j--;
        if(i <= j) {
            // Меняем местами 2 элемента
            y = arr[i];
            arr[i] = arr[j];
            arr[j] = y;
            i++;
            j--;
        }
    } while(i <= j);
    // Рекурсия
    if(low < j) quicksort(arr, low, j);
    if(i < high) quicksort(arr, i , high);
}

int main(void) {
    int array[MAXARRAY] = {0};
    int i = 0;
    // Загружаем в массив случайные числа
    for(i = 0; i < MAXARRAY; i++) array[i] = rand() % 100;
    // Выводим массив
    cout << "До сортировки: ";
    for(i = 0; i < MAXARRAY; i++){
        cout << array[i] << " ";
    }
    cout << endl;
    quicksort(array, 0, (MAXARRAY - 1));
    // Выводим результат
    cout << "После: ";
    for(i = 0; i < MAXARRAY; i++){
        cout << array[i] << " ";
    }
    cout << endl;

    return 0;
}
```

стр. 247